<!DOCTYPE html>
<html>
  <head>
    <title>Gacha</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../Computer Modern/Serif/cmun-serif.css">
  </head>
  <body>
    <nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-dark">
      <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-link" href="..">Home</a>
                <a class="nav-link" href="../resume.pdf">Resume</a>
            </div>
          </div>
        </div>
    </nav>
    <br><br>
    <div class="container p-3 text-center">
      <button class="m-2">Click here to roll</button>
      <p id="output">Let's see what you got!</p>
      <p id="count">Number of rolls: 0</p>
      <p><b>Your rolls:</b></p>
      <ul id="rolls" style="text-align:left;display:inline-block;"></ul>
    </div>
    <script>
      class Card {
      constructor(name, chance) {
          this.name = name;
          this.chance = chance;
      }
      }

      let count = 0;
      let cards = [
          new Card("1000 dollars from Donald Trump", 0.05),
          new Card("destroyed in chess", 0.05),
          new Card("a diploma from UMD", 0.15),
          new Card("a free meal from Quickway", 0.2),
          new Card("coronavirus", 0.01),
          new Card("a C on your last midterm", 0.1),
          new Card("a 0/10 on your last homework", 0.04),
          new Card("fired from your job", 0.05),
          new Card("another math problem you have no idea how to do", 0.15),
          new Card("another programming assignment you have no motivation for", 0.1),
          new Card("rejected from another internship", 0.10)
      ];

      var rolls = [];

      const buttons = document.querySelectorAll("button");

      for (let i = 0; i < buttons.length; i++) {
      buttons[i].addEventListener("click", roll);
      }

      function roll() {
          count++;
          let rng = Math.random();
          console.log(rng);
          let rollValue;
          let i = 0;
          while (rng >= cdf(i)) {
              i++;
          }
          rollValue = cards[i].name;
          rolls.push(cards[i]);
          document.getElementById("output").innerHTML = "You got " + rollValue + "!";
          updateRolls(cards[i]);
          document.getElementById("count").innerHTML = "Number of rolls: " + count;
      }

      function cdf(x) {
          let sum = 0;
          let i;
          for (i = 0; i <= x; i++) {
              sum += cards[i].chance;
          }
          return sum;
      }

      function updateRolls(card) {
      var ul = document.getElementById("rolls");
      var li = document.createElement("li");
      li.appendChild(document.createTextNode(card.name));
      ul.appendChild(li);
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>    
  </body>
</html>
