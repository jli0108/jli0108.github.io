<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <head>
    <meta charset="utf-8">
    <title>Visualizing Random Walk</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../Computer Modern/Serif/cmun-serif.css"
  </head>
  <body align="center">
    <div class="topnav">
      <a href="../index.html" class="active">Home</a>
      <a href="../resume.pdf" class="active">Resume</a>
      <a href="../summer2020.html" class="active">Summer 2020</a>
    </div>
    <div>
      <p>
        <b>One of those gambler setups.</b> You worked all summer at McDonald's to earn $5. You decide to gamble it all away by playing the hottest new game, chess.<br>
        Since your chess skills are only average, you either win or lose $1 each game, with equal probability. You stop when you go broke or you make bank with $10.
      </p>
      <canvas id="randomWalk" width=1000, height=300></canvas>
      <img id="dollars" src="dollar bills 5.png" width = 500></img>
      <script>

        var canvas = document.getElementById("randomWalk");
        var ctx = canvas.getContext("2d");
        var image = document.getElementById("dollars");
        var n = 11, m = 5;
        var radius = 20;
        var states = new Array(n);

        var padding = 50;
        var activeStateColor = "red";
        var inactiveStateColor = "#0095DD";
        var intervalId;
        for (i = 0; i < n; i++) {
          states[i] = { x: (canvas.width - 2 * padding) * i / (n-1) + padding, y: canvas.height / 2, active: false};
        }

        function drawStates() {
          for (var i = 0; i < n; i++) {
            ctx.beginPath();
            ctx.arc(states[i].x, states[i].y, radius, 0, Math.PI*2);
            ctx.fillStyle = (states[i].active) ? activeStateColor : inactiveStateColor;
            ctx.fill();
            ctx.font = "20px Comic Sans";
            ctx.fillStyle = "black";
            ctx.textAlign = "center";
            ctx.fillText(i, states[i].x, states[i].y + 5);
            ctx.closePath();
          }
        }

        function drawArrows() {
          for (var i = 0; i < n - 1; i++) {
            ctx.beginPath();
            ctx.moveTo(states[i].x + radius, states[i].y);
            ctx.lineTo(states[i + 1].x - radius, states[i].y);
            ctx.stroke();
            if (i < n - 2) {
              // drawing left arrow heads
              ctx.moveTo(states[i].x + radius + 5, states[i].y - 5);
              ctx.lineTo(states[i].x + radius, states[i].y);
              ctx.lineTo(states[i].x + radius + 5, states[i].y + 5);
              ctx.stroke();
            }
            if (i > 0) {
              // drawing right arrow heads
              ctx.moveTo(states[i+1].x - radius - 5, states[i+1].y - 5);
              ctx.lineTo(states[i+1].x - radius, states[i].y);
              ctx.lineTo(states[i+1].x - radius - 5, states[i+1].y + 5);
              ctx.stroke();
              ctx.closePath();
            }
          }
        }

        function draw() {
          states[m].active = true;

          drawStates();
          image.src = ("dollar bills " + m + ".png");

          if (m > 0 && m < n - 1) {
            states[m].active = false;
            if (Math.random() < 1/2) {
              m++;
            } else {
              m--;
            }
          } else {
            if (m == 0) {
              ctx.font = "16px Arial";
              ctx.fillStyle = "black";
              ctx.fillText("You are now broke.", canvas.width / 2, canvas.height - 20);
            } else if (m == n - 1) {
              ctx.font = "16px Arial";
              ctx.fillStyle = "black";
              ctx.fillText("You doubled your money!", canvas.width / 2, canvas.height - 20);
            }
            clearInterval(intervalId);
          }
        }
        drawArrows();
        draw();
        intervalId = setInterval(draw, 1000);
      </script>
    </div>
  </body>
</html>
