<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <head>
    <meta charset="utf-8">
    <title>Gacha</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="Computer Modern/Serif/cmun-serif.css">
  </head>
  <body align="center">
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="resume.pdf">Resume</a></li>
        <li><a href="summer2020.html">Summer 2020</a></li>
        <li><a href="#" onclick="return false;">This button does nothing but I intend to add more items to the menu eventually</a></li>
      </ul>
    </nav>
    <div>
      <button>Click here to roll</button>
      <p id="output">Let's see what you got!</p>
      <p id="count">Number of rolls: 0</p>
      <p><b>Your rolls:</b></p>
      <ul id="rolls" class="centeredList"></ul>
      <script>
        class Card {
          constructor(name, chance) {
            this.name = name;
            this.chance = chance;
          }
        }

        var count = 0;
        var cards = [
          new Card("1000 dollars from Donald Trump", 0.05),
          new Card("destroyed in chess", 0.05),
          new Card("a diploma from UMD, one of the most prestigious schools out there", 0.15),
          new Card("a free meal from Quickway", 0.2),
          new Card("coronavirus", 0.01),
          new Card("a C on your last midterm", 0.1),
          new Card("a 0/10 on your last homework", 0.04),
          new Card("fired from your job", 0.05),
          new Card("another math problem you have no idea how to do", 0.15),
          new Card("another programming assignment you have no motivation for", 0.1),
          new Card("rejected from another internship", 0.10)
        ];

        var rolls = [];

        const buttons = document.querySelectorAll("button");

        for (let i = 0; i < buttons.length; i++) {
          buttons[i].addEventListener("click", roll);
        }

        function roll() {
          count++;
          var rng = Math.random();
          console.log(rng);
          var rollValue;
          var i = 0;
          while (rng >= cdf(i)) {
            i++;
          }
          rollValue = cards[i].name;
          rolls.push(cards[i]);
          document.getElementById("output").innerHTML = "You got " + rollValue + "!";
          updateRolls(cards[i]);
          document.getElementById("count").innerHTML = "Number of rolls: " + count;
        }

        function cdf(x) {
          var sum = 0;
          var i;
          for (i = 0; i <= x; i++) {
            sum += cards[i].chance;
          }
          return sum;
        }

        function updateRolls(card) {
          var ul = document.getElementById("rolls");
          var li = document.createElement("li");
          li.appendChild(document.createTextNode(card.name));
          ul.appendChild(li);
        }
      </script>
    </div>
  </body>
</html>
