<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <head>
    <meta charset="utf-8">
    <title>Visualizing Random Walk</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="Computer Modern/Serif/cmun-serif.css"
  </head>
  <body align="center">
    <div class="topnav">
      <a href="index.html" class="active">Home</a>
      <a href="resume.pdf" class="active">Resume</a>
      <a href="summer2020.html" class="active">Summer 2020</a>
    </div>
    <div>
      <p>
        One of those gambler setups. You worked all summer at McDonald's to earn $5. You decide to gamble it all away by playing the hottest new game, chess.<br>
        Since your chess skills are only average, you either win or lose $1 each game, with equal probability. You stop when you go broke or you make bank with $9.
      </p>
      <canvas id="myCanvas" width=1000, height=300></canvas>
      <script>

        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");

        var n = 10, m = 5;
        var radius = 20;
        var states = new Array(n);

        var padding = 50;
        var activeStateColor = "red";
        var inactiveStateColor = "#0095DD";
        var intervalId;

        for (i = 0; i < n; i++) {
          states[i] = { x: (canvas.width - 2 * padding) * i / (n-1) + padding, y: canvas.height / 2, active: false};
        }

        function drawStates() {
          for (var i = 0; i < n; i++) {
            ctx.beginPath();
            ctx.arc(states[i].x, states[i].y, radius, 0, Math.PI*2);
            ctx.fillStyle = (states[i].active) ? activeStateColor : inactiveStateColor;
            ctx.fill();
            ctx.font = "20px Comic Sans";
            ctx.fillStyle = "black";
            ctx.textAlign = "center";
            ctx.fillText(i, states[i].x, states[i].y + 5);
            ctx.closePath();
          }
        }

        function drawArrows() {
          for (var i = 0; i < n - 1; i++) {
            ctx.beginPath();
            ctx.moveTo(states[i].x + radius, states[i].y);
            ctx.lineTo(states[i + 1].x - radius, states[i].y);
            ctx.stroke();
            // drawing left arrow heads
            ctx.moveTo(states[i].x + radius + 5, states[i].y - 5);
            ctx.lineTo(states[i].x + radius, states[i].y);
            ctx.lineTo(states[i].x + radius + 5, states[i].y + 5);
            ctx.stroke();
            // drawing right arrow heads
            ctx.moveTo(states[i+1].x - radius - 5, states[i+1].y - 5);
            ctx.lineTo(states[i+1].x - radius, states[i].y);
            ctx.lineTo(states[i+1].x - radius - 5, states[i+1].y + 5);
            ctx.stroke();
            ctx.closePath();
          }
        }

        function draw() {
          console.log(m);
          drawArrows();
          states[m].active = true;

          drawStates();

          if (m > 0 && m < n - 1) {
            states[m].active = false;
            if (Math.random() < 1/2) {
              m++;
            } else {
              m--;
            }
          }
        }
        draw();
        setInterval(draw, 1000);
      </script>
    </div>
  </body>
</html>
